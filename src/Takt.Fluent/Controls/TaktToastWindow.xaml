<Window x:Class="Takt.Fluent.Controls.TaktToastWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:helpers="clr-namespace:Takt.Fluent.Helpers"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Toast"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="Manual"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        Background="Transparent"
        WindowStyle="None"
        AllowsTransparency="True"
        Topmost="True"
        ShowActivated="False">
    <Window.Resources>
        <helpers:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>
        <Storyboard x:Key="FadeInAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0" To="1"
                             Duration="0:0:0.3"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             From="-20" To="0"
                             Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        <Storyboard x:Key="FadeOutAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="1" To="0"
                             Duration="0:0:0.3"/>
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                             From="0" To="-20"
                             Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseIn"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </Window.Resources>
    
    <Window.RenderTransform>
        <TranslateTransform/>
    </Window.RenderTransform>
    
    <Border x:Name="ToastBorder"
            BorderBrush="{Binding BorderBrush}"
            BorderThickness="2"
            CornerRadius="8"
            Background="{DynamicResource MaterialDesignPaper}"
            Padding="16"
            MinWidth="300"
            MaxWidth="500">
        <Border.Effect>
            <DropShadowEffect Color="Black" 
                            Opacity="0.3" 
                            BlurRadius="20" 
                            ShadowDepth="5" 
                            Direction="270"/>
        </Border.Effect>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- 图标 -->
            <materialDesign:PackIcon Grid.Column="0"
                                     Kind="{Binding IconKind}"
                                     Width="24"
                                     Height="24"
                                     VerticalAlignment="Center"
                                     Margin="0,0,12,0"
                                     Foreground="{Binding IconBrush}"/>
            
            <!-- 内容区域 -->
            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                <!-- 标题（可选） -->
                <TextBlock Text="{Binding Title}"
                           FontSize="14"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                           Margin="0,0,0,4"
                           Visibility="{Binding Title, Converter={StaticResource NullToVisibilityConverter}}"/>
                
                <!-- 消息内容 -->
                <TextBlock Text="{Binding Message}"
                           FontSize="13"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                           TextWrapping="Wrap"
                           LineHeight="20"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>

