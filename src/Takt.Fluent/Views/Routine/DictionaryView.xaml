<UserControl x:Class="Takt.Fluent.Views.Routine.DictionaryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:controls="clr-namespace:Takt.Fluent.Controls"
             xmlns:local="clr-namespace:Takt.Fluent.Extensions"
             mc:Ignorable="d"
             d:DesignHeight="720"
             d:DesignWidth="1280"
             ClipToBounds="False"
             HorizontalAlignment="Stretch"
             VerticalAlignment="Stretch">
    <Grid ClipToBounds="False"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- 主表：字典类型 -->
        <controls:TaktDataGrid Grid.Row="0"
                               ItemsSource="{Binding DictionaryTypes}"
                               SelectedItem="{Binding SelectedDictionaryType, Mode=TwoWay}"
                               ShowQueryArea="True"
                               QueryKeyword="{Binding TypeKeyword, Mode=TwoWay}"
                               QueryCommand="{Binding QueryTypesCommand}"
                               ShowToolbar="True"
                               ShowToolbarCreate="True"
                               ShowToolbarUpdate="True"
                               ShowToolbarDelete="True"
                               ShowToolbarImport="True"
                               ShowToolbarExport="True"
                               CreateCommand="{Binding CreateTypeCommand}"
                               UpdateCommand="{Binding UpdateTypeCommand}"
                               DeleteCommand="{Binding DeleteTypeCommand}"
                               ImportCommand="{Binding ImportCommand}"
                               ExportCommand="{Binding ExportCommand}"
                               DownloadTemplateCommand="{Binding DownloadTemplateCommand}"
                               ShowPagination="True"
                               PageIndex="{Binding TypePageIndex, Mode=TwoWay}"
                               PageSize="{Binding TypePageSize, Mode=TwoWay}"
                               TotalCount="{Binding TypeTotalCount}"
                               PageChangedCommand="{Binding PageChangedTypesCommand}"
                               EmptyText="{local:Localization Key=common.noData}">
            <controls:TaktDataGrid.Columns>
                <controls:TaktDataGridColumnDefinition Header="{local:Localization Key=routine.dictionarytype.typecode}"
                                                        BindingPath="TypeCode"
                                                        Width="150" />
                <controls:TaktDataGridColumnDefinition Header="{local:Localization Key=routine.dictionarytype.typename}"
                                                        BindingPath="TypeName"
                                                        Width="*" />
                <controls:TaktDataGridColumnDefinition Header="{local:Localization Key=routine.dictionarytype.ordernum}"
                                                        BindingPath="OrderNum"
                                                        Width="80" />
                <controls:TaktDataGridColumnDefinition Header="{local:Localization Key=routine.dictionarytype.typestatus}"
                                                        BindingPath="TypeStatus"
                                                        Width="100" />
            </controls:TaktDataGrid.Columns>
        </controls:TaktDataGrid>

        <!-- 分隔条 -->
        <GridSplitter Grid.Row="1"
                       Height="4"
                       HorizontalAlignment="Stretch"
                       VerticalAlignment="Center"
                       Background="{DynamicResource MaterialDesignDivider}"
                       ResizeDirection="Rows"
                       ShowsPreview="False" />

        <!-- 子表：字典数据（支持行内编辑） -->
        <controls:TaktInlineEditDataGrid Grid.Row="2"
                                         ItemsSource="{Binding DictionaryDataList}"
                                         SelectedItem="{Binding SelectedDictionaryData, Mode=TwoWay}"
                                         EditingItem="{Binding EditingDictionaryData, Mode=TwoWay}"
                                         ShowQueryArea="True"
                                         QueryKeyword="{Binding DataKeyword, Mode=TwoWay}"
                                         QueryCommand="{Binding QueryDataCommand}"
                                         ShowToolbar="True"
                                         ShowToolbarAddRow="True"
                                         AddRowCommand="{Binding CreateDataInlineCommand}"
                                         RowUpdateCommand="{Binding UpdateDataInlineCommand}"
                                         RowSaveCommand="{Binding SaveDataInlineCommand}"
                                         RowCancelCommand="{Binding CancelDataInlineCommand}"
                                         RowDeleteCommand="{Binding DeleteDataCommand}"
                                         ShowRowUpdate="True"
                                         ShowRowSave="True"
                                         ShowRowCancel="True"
                                         ShowRowDelete="True"
                                         EmptyText="{local:Localization Key=common.noData}">
            <controls:TaktInlineEditDataGrid.Columns>
                <controls:TaktDataGridColumnDefinition Header="{local:Localization Key=routine.dictionarydata.datalabel}"
                                                        BindingPath="DataLabel"
                                                        Width="*" />
                <controls:TaktDataGridColumnDefinition Header="{local:Localization Key=routine.dictionarydata.i18nkey}"
                                                        BindingPath="I18nKey"
                                                        Width="200" />
                <controls:TaktDataGridColumnDefinition Header="{local:Localization Key=routine.dictionarydata.datavalue}"
                                                        BindingPath="DataValue"
                                                        Width="200" />
                <controls:TaktDataGridColumnDefinition Header="{local:Localization Key=routine.dictionarydata.ordernum}"
                                                        BindingPath="OrderNum"
                                                        Width="80" />
                <controls:TaktDataGridColumnDefinition Header="{local:Localization Key=common.audit.Remarks}"
                                                        BindingPath="Remarks"
                                                        Width="200" />
            </controls:TaktInlineEditDataGrid.Columns>
        </controls:TaktInlineEditDataGrid>
    </Grid>
</UserControl>

