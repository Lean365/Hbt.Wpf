<Window x:Class="Takt.Fluent.Views.Identity.RoleComponent.RoleAssignMenu"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Takt.Fluent.Extensions"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:helpers="clr-namespace:Takt.Fluent.Helpers"
        xmlns:controls="clr-namespace:Takt.Fluent.Controls"
        mc:Ignorable="d"
        d:DesignHeight="600"
        d:DesignWidth="800"
        Title="{Binding Title}"
        SizeToContent="Manual"
        WindowStartupLocation="Manual"
        ResizeMode="CanResize"
        Background="{DynamicResource MaterialDesignPaper}">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <helpers:EmptyToVisibilityConverter x:Key="EmptyToVisibilityConverter"/>
        <helpers:StringToBoolConverter x:Key="StringToBoolConverter"/>
        <helpers:InverseBoolConverter x:Key="InverseBoolConverter"/>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}"/>
        </Style>
    </Window.Resources>

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 角色信息 -->
        <StackPanel Grid.Row="0" Margin="0,0,0,16">
            <TextBlock Text="{local:Localization Key=identity.role.rolename}" Style="{StaticResource MaterialDesignBody2TextBlock}" Margin="0,0,0,4"/>
            <TextBlock Text="{Binding RoleName}" Style="{StaticResource MaterialDesignHeadline6TextBlock}" Margin="0,0,0,4"/>
            <TextBlock Text="{local:Localization Key=identity.role.rolecode}" Style="{StaticResource MaterialDesignBody2TextBlock}" Margin="0,0,0,4"/>
            <TextBlock Text="{Binding RoleCode}" Style="{StaticResource MaterialDesignBody1TextBlock}"/>
        </StackPanel>

        <!-- 菜单分配穿梭框 -->
        <controls:TaktTransfer Grid.Row="1"
                                     Margin="0,0,0,16"
                                     LeftTitle="{local:Localization Key=identity.role.transfer.unassigned}"
                                     RightTitle="{local:Localization Key=identity.role.transfer.assigned}"
                                     MoveRightToolTip="{local:Localization Key=identity.role.transfer.moveright}"
                                     MoveAllRightToolTip="{local:Localization Key=identity.role.transfer.moveallright}"
                                     MoveLeftToolTip="{local:Localization Key=identity.role.transfer.moveleft}"
                                     MoveAllLeftToolTip="{local:Localization Key=identity.role.transfer.moveallleft}">
            <controls:TaktTransfer.LeftItemsSource>
                <Binding Path="UnassignedMenus"/>
            </controls:TaktTransfer.LeftItemsSource>
            <controls:TaktTransfer.RightItemsSource>
                <Binding Path="AssignedMenus"/>
            </controls:TaktTransfer.RightItemsSource>
            <controls:TaktTransfer.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="4">
                        <TextBlock Style="{StaticResource MaterialDesignBody1TextBlock}" FontWeight="Bold">
                            <Run Text="{Binding Indent}"/>
                            <Run Text="{Binding MenuName}"/>
                        </TextBlock>
                        <TextBlock Text="{Binding MenuCode}" 
                                   Style="{StaticResource MaterialDesignBody2TextBlock}"
                                   Foreground="{DynamicResource MaterialDesignBodyLight}"
                                   Margin="0,2,0,0"/>
                        <TextBlock Text="{Binding MenuType}" 
                                   Style="{StaticResource MaterialDesignBody2TextBlock}"
                                   Foreground="{DynamicResource MaterialDesignBodyLight}"
                                   Margin="0,2,0,0"/>
                    </StackPanel>
                </DataTemplate>
            </controls:TaktTransfer.ItemTemplate>
        </controls:TaktTransfer>

        <!-- 错误/成功消息 -->
        <TextBlock Grid.Row="2"
                   Text="{Binding ErrorMessage}"
                   Foreground="{DynamicResource SystemFillColorCriticalBrush}"
                   Visibility="{Binding ErrorMessage, Converter={StaticResource EmptyToVisibilityConverter}}"
                   TextWrapping="Wrap"
                   Margin="0,0,0,8"/>

        <TextBlock Grid.Row="2"
                   Text="{Binding SuccessMessage}"
                   Foreground="{DynamicResource SystemFillColorSuccessBrush}"
                   Visibility="{Binding SuccessMessage, Converter={StaticResource EmptyToVisibilityConverter}}"
                   TextWrapping="Wrap"
                   Margin="0,0,0,8"/>

        <!-- 按钮 -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button IsDefault="True"
                    Command="{Binding SaveCommand}"
                    Content="{local:Localization Key=common.button.submit}"
                    Style="{StaticResource DefaultPrimary}"
                    Margin="0,0,12,0"
                    IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"/>
            <Button IsCancel="True"
                    Content="{local:Localization Key=common.button.cancel}"
                    Style="{StaticResource DefaultInfo}"/>
        </StackPanel>
    </Grid>
</Window>

